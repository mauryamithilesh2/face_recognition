{% extends "attendance/base.html" %}

{% block title %}All Student records{% endblock  %}

{% block content %}
<h3>All Student's Attendance</h3>

{% for student, records in grouped_attendance.items %}
  <h4>{{ student.user }} (Roll No: {{ student.roll_no }})</h4>

<table class="table table-bordered table-striped mb-4">
    <thead>
        <tr>
            {% comment %} <th>Student Name</th> {% endcomment %}
            <th>Roll No</th>
            <th>Date</th>
            <th>Time</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for record in records  %}
        <tr>
            {% comment %} <td>{{ record.student.user.username }}</td> {% endcomment %}
            <td>{{ record.date }}</td>
            <td>{{record.student.roll_no}}</td>
            <td>{{ record.timestamp|time:"H:i:s" }}</td>
            <td>
                {% if record.status == "Present" %}
                <span class="badge bg-success"> Present</span>
                {% else %}
                 <span class="badge bg-danger"> Absent</span>
                {% endif %}
            </td>
        </tr>
         {% empty %}
        <tr>
            <td colspan="2">No attendance marked today.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% empty %}
  <p>No students found.</p>
{% endfor %}


{% endblock  %}